<!DOCTYPE html>
<html>

<head>
    <meta name="naver-site-verification" content="4b8e1f59fe0a5c3f157456831d9e44743485649a" />
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>미녀 타입 테스트 </title>
    <link rel="stylesheet" href="style.css">

    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>

    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-616efe8e0a7e59ad"></script>

</head>

<body>
    <div class="loader" id="loader" style="display: none;"> </div>

    <nav class="navbar navbar-expand-lg navbar-light nav-distance">
        <a class="navbar-brand" href="#">AI 이미지 테스트</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">이미지 테스트
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Features</a>
                </li>
            </ul>
        </div>
    </nav>
    <section class="section">
        <div class="section-div">
            <img src="image/ImgGameLogo.png" class="gameLogo">
            <h1 class="title">재미로 보는 AI 테스트 </h1>
            <h2 class="subtitle">나는 어떤 타입의 미녀일까?</h2>
        </div>
    </section>

    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <div class="file-upload">
        <div class="image-upload-wrap">
            <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
            <div class="drag-text">
                <img src="image/figure.png" class="mt-5 pt-5 upload">
                <h3 class="mb-5 pb-5 pt-4  upload-text">사진을 업로드하여<br>알아보기</h3>
                <p class="notice-text">* 사진은 어디에도 저장되지 않습니다.</p>
            </div>
        </div>
        <div class="file-upload-content">
            <img class="file-upload-image" id="face-image" src="#" alt="your image" />

            <div id="loading" class="animated bounce">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <p class="text-center">AI가 당신을 분석중입니다.</p>
            </div>
            <p class="result-message"></p>
            <div id="label-container"></div>

            <div class="image-title-wrap">
                <button type="button" onclick="removeUpload()" class="remove-image">다른 사진으로 재시도</button>
            </div>
            <!-- Go to www.addthis.com/dashboard to customize your tools -->
            <!-- <div id="addThis" class="addthis_inline_share_toolbox"></div> -->
                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <!-- <div class="addthis_inline_share_toolbox_3azk"></div> -->
                <div class="addthis_inline_share_toolbox_2tzp"></div>
            
        </div>
    </div>

    <footer class="footer">
        <div class="under">
            <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="under-text">thanks to
                조코딩(click)</a><br>
            <a href="https://codepen.io/aaronvanston/pen/yNYOXR" class="under-text">File Upload Input : Copyright (c)
                2020 by Aaron Vanston </a><br>
            <p class="under-text">Copyright 2021. hyunok hwang All pictures cannot be copied without permission.</p>
        </div>
    </footer>

    <div class="mt-2 container d-flex justify-content-center ad-banner">
        <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-j9FyzdOhNFXWpSnh" data-ad-width="320"
            data-ad-height="100">
        </ins>
    </div>

    <!-- Optional JavaScript -->
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
    <script>
        function readURL(input) {

            // Loading();

            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('.image-upload-wrap').hide();
                    $('#loading').show();
                    $('.file-upload-image').attr('src', e.target.result);
                    $('.file-upload-content').show();
                    $('.image-title').html(input.files[0].name);
                };
                reader.readAsDataURL(input.files[0]);

                Loading();

                init().then(function () {
                    predict();
                    $('#loading').hide();
                    closeLoading();
                });

            } else {
                removeUpload();
                closeLoading();
            }
        }

        function removeUpload() {

            console.log("removeUpload");
            $('.file-upload-input').replaceWith($('.file-upload-input').clone());
            $('.file-upload-content').hide();
            $('.image-upload-wrap').show();
            // hhotest
            $('.result-message').hide();

        }
        $('.image-upload-wrap').bind('dragover', function () {
            $('.image-upload-wrap').addClass('image-dropping');
        });
        $('.image-upload-wrap').bind('dragleave', function () {
            $('.image-upload-wrap').removeClass('image-dropping');
        });
    </script>

    <script type="text/javascript">
        // More API functions here:
        // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
        // the link to your model provided by Teachable Machine export panel
        // techable macine URL
        // const URL = "https://teachablemachine.withgoogle.com/models/NaFJzBdMx/"; //어징어게임
        const URL = "https://teachablemachine.withgoogle.com/models/tfw3xNuRe/"; //냉온
        let model, webcam, labelContainer, maxPredictions;
        // Load the image model and setup the webcam
        async function init() {
            console.log("hho log - init")
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";
            // load the model and metadata
            // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
            // or files from your local hard drive
            // Note: the pose library adds "tmImage" object to your window (window.tmImage)
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
            labelContainer = document.getElementById("label-container");
            for (let i = 0; i < maxPredictions; i++) {
                var element = document.createElement("div")
                element.classList.add("d-flex");
                labelContainer.appendChild(element);
            }
            // for (let i = 0; i < maxPredictions; i++) { // and class labels
            //     labelContainer.appendChild(document.createElement("div"));
            // }
        }
        // run the webcam image through the image model
        async function predict() {
            // predict can take in an image, video or canvas html element
            var image = document.getElementById("face-image")
            const prediction = await model.predict(image, false); // console.log(prediction); 
            console.log(prediction);

            prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
            console.log("hho log - prediction ")

            var resultTitle;
            var resultCeleb;
            var resultMessage;

            console.log(prediction[0]);
            console.log(prediction[0].className);
            switch (prediction[0].className) {
                case "온_1":
                    resultTitle = "전형적인 댕댕이상의 온미녀"
                    resultCeleb = "박보영";
                    resultMessage = "귀여움, 웃상, 착해보임, 강아지상, 상냥하다";
                    break;

                case "온_2":
                    resultTitle = "전형적인 아름다움을 가진 온미녀"
                    resultCeleb = "손예진";
                    resultMessage = "차분한, 청순한, 상냥한, 부드러운 첫인상, 아름다움";
                    break;
                case "온_3":
                    resultTitle = "첫사랑 이미지의 온미녀"
                    resultCeleb = "수지";
                    resultMessage = "부드러운 첫인상, 동글동글한 ,마음이 따뜻해지는,분위기 있는";
                    break;
                case "온_4":
                    resultTitle = "전형적인 미인상 온미녀"
                    resultCeleb = "김태희";
                    resultMessage = "마음이 따뜻해지는, 차분한, 상냥한, 분위기 있는";
                    break;
                case "온_5":
                    resultTitle = "애교가 묻어나는 온미녀"
                    resultCeleb = "문채원";
                    resultMessage = "수수해보이는, 귀여움, 다정다감,동글동글 ,강아지상 ";
                    break;
                case "온_6":
                    resultTitle = "상큼발랄한 온미녀"
                    resultCeleb = "박하선";
                    resultMessage = "편안한 분위기의, 웃상, 수수해보임, 발랄한 ";
                    break;
                case "온_7":
                    resultTitle = "편안한 분위기의 온미녀"
                    resultCeleb = "송지효";
                    resultMessage = "눈이 예쁘다, 편안한 분위기의, 수수해보이는, 분위기 있는";
                    break;
                case "온_8":
                    resultTitle = "러블리한 온미녀"
                    resultCeleb = "신민아";
                    resultMessage = "상큼하다, 아름다운 미소, 상냥한, 사랑스러움";
                    break;
                case "온_9":
                    resultTitle = "수수한 아름다움을 가진 온미녀"
                    resultCeleb = "임수정";
                    resultMessage = "단아한, 부드러운 첫인상, 분위기 있는";
                    break;
                case "온_10":
                    resultTitle = "사랑스러운 온미녀"
                    resultCeleb = "장나라";
                    resultMessage = "깨끗한, 편안한의 분위기, 부드러운 첫인상, 상냥한";
                    break;
                case "온_11":
                    resultTitle = "호불호 없는 온미녀"
                    resultCeleb = "한지민";
                    resultMessage = "깨끗한, 다정다감, 마음이 따뜻, 편안한의 분위기";
                    break;
                case "온_12":
                    resultTitle = "막내동생 같은 온미녀"
                    resultCeleb = "효정";
                    resultMessage = "상큼한, 귀여운, 다정다감, 상냥, 웃상, 애교가 많은";
                    break;

                case "냉_1":
                    resultTitle = "전형적인 미인상 냉미녀"
                    resultCeleb = "김희선";
                    resultMessage = "세련된, 정석 미녀상, 시원시원한, 솔직한 ";
                    break;

                case "냉_2":
                    resultTitle = "도도한 냉미녀"
                    resultCeleb = "아이린";
                    resultMessage = "시크한, 차가워보이는, 도도한 ";
                    break;
                case "냉_3":
                    resultTitle = "섹시한 분위기의 냉미녀"
                    resultCeleb = "이지아";
                    resultMessage = "아우라가 있는,걸크러쉬의 매력, 카리스마 있는";
                    break;
                case "냉_4":
                    resultTitle = "전형적으로 세련된 냉미녀"
                    resultCeleb = "고준희";
                    resultMessage = "세련된, 도도한, 시크한, 섹시한 ";
                    break;
                case "냉_5":
                    resultTitle = "아우리가 풍기는 냉미녀"
                    resultCeleb = "김소연";
                    resultMessage = "세련된, 섹시한, 아우라가 있는";
                    break;
                case "냉_6":
                    resultTitle = "차분한 분위기의 냉미녀"
                    resultCeleb = "민효린";
                    resultMessage = "차분한, 신비로운 이미지를 가진, 시크한";
                    break;
                case "냉_7":
                    resultTitle = "시크함과 귀여움이 공존하는 냉미녀"
                    resultCeleb = "소희";
                    resultMessage = "개성있는, 고양이상, 시크한, 차분한 ";
                    break;
                case "냉_8":
                    resultTitle = "커리어우먼 스타일의 냉미녀"
                    resultCeleb = "이다희";
                    resultMessage = "트렌디한, 도도한, 시원시원한, 또렷한 이미지를 가진";
                    break;
                case "냉_9":
                    resultTitle = "전형적인 미인상 냉미녀"
                    resultCeleb = "전지현";
                    resultMessage = "정석 미녀상, 시원시원한, 솔직한 이미지, 시크한, 차분한";
                    break;
                case "냉_10":
                    resultTitle = "개성이 강한 냉미녀"
                    resultCeleb = "카리나";
                    resultMessage = "개성있는, 트렌디한, 신비로움, 에너지 있는 ";
                    break;
                case "냉_11":
                    resultTitle = "시크한 냉미녀"
                    resultCeleb = "크리스탈";
                    resultMessage = "신비로운, 시크한, 도도한, 차가워보이는 ";
                    break;
                case "냉_12":
                    resultTitle = "신비로운 분위기의 냉미녀"
                    resultCeleb = "한소희";
                    resultMessage = "세련됨, 신비로움, 화사한, 개성있는";
                    break;
                case "냉_13":
                    resultTitle = "힙한 분위기의 냉미녀"
                    resultCeleb = "한예슬";
                    resultMessage = "걸크러쉬, 또렷한 이목구비를 가진, 트렌디한";
                    break;
                default:
                    resultTitle = "";
                    resultCeleb = "other";
                    resultMessage = "";
                    break;
            }
            result = "";
            result += "AI가 판단한 당신은 '" + resultTitle + "' 입니다. <br>"
            result += "당신은 '" + resultMessage + "' 과 같은햐 이미지가 조금 더 강하게 나타는 것으로 보입니다.<br>"
            result += "당신과 비슷한 이미지의 연예인은 '" + resultCeleb + "' 입니다.";

            var title = "<div class='chracter-title'>" + resultTitle + "</div>"
            var celeb = "<div class='chracter-celeb pt-2'>" + "아래 그래프에서 나의 냉/온 비율을 확인 해 보세요." + "</div>"
            var message = "<div class='chracter-msg pt-2 pb-2'>" + result + "</div>"
            $('.result-message').html(title + message + celeb).show();

            warmstr = "온";
            warmsum = 0;
            coldsum = 0;
            
            for (let i = 0; i < maxPredictions; i++) {
                if (prediction[i].className.indexOf(warmstr) > -1) {
                    warmsum +=  Math.round( prediction[i].probability.toFixed(2) * 100);
                }
                else {
                    coldsum +=  Math.round( prediction[i].probability.toFixed(2) * 100);
                }
            }
            if(warmsum >= coldsum)
                coldsum = 100 -warmsum;
            else
                warmsum = 100 - coldsum;

            var label = "<div class='per-label d-flex align-items-center'>" + "온미녀" + "</div>"
                var bar = "<div class='bar-container position-relative container'><div class='warm-box'></div><div class='d-flex justify-content-center align-items-center warm-bar' style='width: " + warmsum+"%" + "'><span class='d-block percent-text'>" + warmsum + "%</span></div></div>"
                labelContainer.childNodes[0].innerHTML = label + bar;

                var label2 = "<div class='per-label d-flex align-items-center'>" + "냉미녀" + "</div>"
                var bar2 = "<div class='bar-container position-relative container'><div class='cold-box'></div><div class='d-flex justify-content-center align-items-center cold-bar' style='width: " + coldsum+"%" + "'><span class='d-block percent-text'>" + coldsum + "%</span></div></div>"
                labelContainer.childNodes[1].innerHTML = label2 + bar2;

        }
    </script>
    <script>
        function Loading() {
            console.log("hho log - Loading")

            var maskHeight = $(document).height();
            var maskWidth = window.document.body.clientWidth;

            var mask = "<div id='mask' style='position:absolute; z-index:9000; background-color:#000000; display:none; left:0; top:0;'></div>";
            var loadingImg = '';

            $('body')
                .append(mask)

            $('#mask').css({
                'width': maskWidth,
                'height': maskHeight,
                'opacity': '0.3'
            });

            $('#mask').show();
            // $('#loader').show();
        }

        function closeLoading() {
            console.log("hho log - closeLoading ")

            $('#mask, #loader').hide();
            $('#mask, #loader').remove();
        }
    </script>
</body>

<!-- Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

</html>