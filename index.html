<!DOCTYPE html>
<html>

<head>
    <meta name="naver-site-verification" content="4b8e1f59fe0a5c3f157456831d9e44743485649a" />
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>어징어게임에 오신것을 환영합니다. </title>
    <link rel="stylesheet" href="style.css">

    <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>

    <!-- Go to www.addthis.com/dashboard to customize your tools -->
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-616efe8e0a7e59ad"></script>

</head>

<body>
    <div class="loader" id="loader" style="display: none;"> </div>

    <nav class="navbar navbar-expand-lg navbar-light nav-distance">
        <a class="navbar-brand" href="#">AI 이미지 테스트</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">이미지 테스트
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Features</a>
                </li>
            </ul>
        </div>
    </nav>
    <section class="section">
        <div class="section-div">
            <img src="image/gameLogo.png" class="gameLogo">
            <h1 class="title">재미로 보는 AI 테스트 </h1>
            <h2 class="subtitle">어징어게임에서 나는 몇번 참가자일까?</h2>
        </div>
    </section>

    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <div class="file-upload">
        <div class="image-upload-wrap">
            <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
            <div class="drag-text">
                <img src="image/figure.png" class="mt-5 pt-5 upload">
                <h3 class="mb-5 pb-5 pt-4  upload-text">사진을 업로드하여<br>어징어 게임 참가하기</h3>
                <p class="notice-text">* 사진은 어디에도 저장되지 않습니다.</p>
            </div>
        </div>
        <div class="file-upload-content">
            <img class="file-upload-image" id="face-image" src="#" alt="your image" />

            <div id="loading" class="animated bounce">
                <div class="spinner-border" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <p class="text-center">AI가 당신을 분석중입니다.</p>
            </div>
            <p class="result-message"></p>
            <div id="label-container"></div>
          
            <div class="image-title-wrap">
                <button type="button" onclick="removeUpload()" class="remove-image">다른 사진으로 재시도
                </button>
            </div>
              <!-- Go to www.addthis.com/dashboard to customize your tools -->
              <div id="addThis" class="addthis_inline_share_toolbox"></div>

        </div>
    </div>
    <footer class="footer">
        <div class="under">
            <a href="https://www.youtube.com/channel/UCQNE2JmbasNYbjGAcuBiRRg" class="under-text">thanks to
                조코딩(click)</a><br>
            <a href="https://codepen.io/aaronvanston/pen/yNYOXR" class="under-text">File Upload Input : Copyright (c)
                2020 by Aaron Vanston </a><br>
            <p class="under-text">Copyright 2021. hyunok hwang All pictures cannot be copied without permission.</p>
        </div>
        </div>

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
        <script>
            function readURL(input) {

                // Loading();

                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('.image-upload-wrap').hide();
                        $('#loading').show();
                        $('.file-upload-image').attr('src', e.target.result);
                        $('.file-upload-content').show();
                        $('.image-title').html(input.files[0].name);
                    };
                    reader.readAsDataURL(input.files[0]);

                    Loading();

                    init().then(function () {
                        predict();
                        $('#loading').hide();
                        closeLoading();
                    });

                } else {
                    removeUpload();
                    closeLoading();
                }
            }

            function removeUpload() {

                console.log("removeUpload");
                $('.file-upload-input').replaceWith($('.file-upload-input').clone());
                $('.file-upload-content').hide();
                $('.image-upload-wrap').show();
                // hhotest
                $('.result-message').hide();

            }
            $('.image-upload-wrap').bind('dragover', function () {
                $('.image-upload-wrap').addClass('image-dropping');
            });
            $('.image-upload-wrap').bind('dragleave', function () {
                $('.image-upload-wrap').removeClass('image-dropping');
            });
        </script>

        <script type="text/javascript">
            // More API functions here:
            // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
            // the link to your model provided by Teachable Machine export panel
            // techable macine URL
            const URL = "https://teachablemachine.withgoogle.com/models/NaFJzBdMx/"; //어징어게임
            let model, webcam, labelContainer, maxPredictions;
            // Load the image model and setup the webcam
            async function init() {
                console.log("hho log - init")
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";
                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
                labelContainer = document.getElementById("label-container");
                for (let i = 0; i < maxPredictions; i++) { // and class labels
                    labelContainer.appendChild(document.createElement("div"));
                }
            }
            // run the webcam image through the image model
            async function predict() {
                // predict can take in an image, video or canvas html element
                var image = document.getElementById("face-image")
                const prediction = await model.predict(image, false); // console.log(prediction); 
                console.log(prediction);

                prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
                console.log("hho log - prediction ")

                var resultTitle;
                var resultQuotes;
                var resultMessage;

                console.log(prediction[0]);
                console.log(prediction[0].className);
                switch (prediction[0].className) {
                    case "000_조연":
                        resultTitle = "어디선가 탈락한 존재감 없는 참가자"
                        resultQuotes = "....ㄷㄷㄷ";
                        resultMessage = "능력치가 낮거나, 운이 좋지 않음. 상황 판단을 잘 못함";
                        break;

                    case "001_오일남":
                        resultTitle = "001번 참가자 오일남"
                        resultQuotes = "제바알... 그만해...! 나... 무서워허..! 이러다가는 다 죽어!! ";
                        resultMessage = "우리... 다 걸고 한 판 할까? 그럼 자네가 날 속이고 내 구슬을 가져간 건 말이 되고? .... 우리는 깐부잖아. 깐부끼리는 네 거 내 거가 없는 거야.";
                        break;

                    case "024_지영":
                        resultTitle = "240번 참가자 지영"
                        resultQuotes = "반드시 이기게 해줄게..꼭 살아서 나가라.";
                        resultMessage = "희생, 지옥같은 삶 때문에 염세주의적 시선을 갖게 되었지만 감정이나 인간성이 없어진 것은 아니고 오히려 매우 순수한 마음씨를 갖고 있는 인물";
                        break;

                    case "067_새벽":
                        resultTitle = "067번 참가자 강새벽"
                        resultQuotes = "내가 왜?";
                        resultMessage = "머리가 꽤 좋고 담력과 깡도 좋은 인물, 생존 스킬 만렙,  매 게임마다 당황하지 않고 침착한 면";
                        break;

                    case "101_장덕수":
                        resultTitle = "101번 참가자 장덕수"
                        resultQuotes = "불 꺼지면 구석에 가만히 있어. 숨도 쉬지말고. 숨소리 들리면... 내가 너 잡으러 간다.";
                        resultMessage = "잔머리가 굉장히 잘 돌아간다. 치사하다. 그룹지어서 대장놀이한다.";
                        break;

                    case "111_의사":
                        resultTitle = "111번 참가자 병기"
                        resultQuotes = "여긴 내 수술실이야!";
                        resultMessage = "접적인 완력보다는 뒤에서 몰래 부정을 저지르는 스타일";
                        break;

                    case "199_알리":
                        resultTitle = "199번 참가자 알리"
                        resultQuotes = "솨장님 감사합니다.";
                        resultMessage = "손에 꼽을 정도로 선량한 성품. 머리도 좋고 눈치도 빠르지만 너무 쉽게 사람을 믿음 그래서 배신을 잘 당함. 성실하지만 실속이 없음";
                        break;

                    case "212_한미녀":
                        resultTitle = "212번 참가자 한미녀"
                        resultQuotes = "나 한미녀야!! 덕수야, 그거알아? 넌 X도 졸라 작아.";
                        resultMessage = "빌런 중 빌런, 대놓고 비호감에 이리저리 달라붙는 거머리같은 행동을 남발, 목적 달성을 위해서라면 자존심도 기꺼이 버린다";
                        break;

                    case "218_조상우":
                        resultTitle = "218번 참가자 조상우"
                        resultQuotes = "어차피 우리가 저 돈 가지고 나가려면 다른 놈들 다 죽어야 돼. ";
                        resultMessage = "양면성을 지닌 전형적인 인물, 체면치레를 중시, 머리가 좋고 임기응변을 잘 하며, 기본적으로 굉장히 계산적인 인물로 스스로의 이익과 이해득실에 따른 팀워크를 우선시 함. 인간성이 없는 것은 아니기 때문에 자신의 이익에 지장이 가지 않는 선에서 선행을 곧잘 베풀기도 함 ";
                        break;

                    case "456_이정재":
                        resultTitle = "456번 참가자 성기훈"
                        resultQuotes = "이러면 안 되는 거잖아! 우리끼리 이렇게 죽이면 안 되는 거잖아!";
                        resultMessage = "  타인을 끌어들이고 약자를 포용할 줄 아는 인간적인 매력을 가졌음. 바보같음. 천운을 가짐. 운이 좋음.";
                        break;

                    case "500_경찰":
                        resultTitle = "경찰 황준호"
                        resultQuotes = "형. 형이 왜...";
                        resultMessage = "카멜레온 같음, 대범함, 눈치가 빠름, 어떠한 것에 집착함 ";
                        break;

                    case "600_VIP":
                        resultTitle = "VIPS...."
                        resultQuotes = "If you can satisfy me in five minutes, I'll change your life";
                        resultMessage = " 어마어마한 갑부, 그러나 인간성 결여 된 쓰레기..(죄송합니다)";
                        break;

                    case "601_공유":
                        resultTitle = "딱지치기남"
                        resultQuotes = "선생님, 저랑 게임 하나 하시겠습니까?";
                        resultMessage = "친절 해 보이지만 약을 잘올림, 도발적, 잘생김, 잘생김 ";
                        break;

                    case "602_진행요원":
                        resultTitle = "동그라미 네모 세모"
                        resultQuotes = "0_0?";
                        resultMessage = "속을 알 수 없음, 기계적임, 명령 복종형, 상하관계를 중요시 함";
                        break;

                    case "603_프론트맨":
                        resultTitle = "프론트맨"
                        resultQuotes = "명심해. 우리가 누군지 알게 되면 죽는다.";
                        resultMessage = "속을 알 수 없음, 상황 판단이 빠름, 관찰력이 뛰어남, 평등을 중요시";
                        break;

                    default:
                        resultTitle = "신원미상";
                        resultQuotes = "어징어 게임에 참가하시겠습니까?";
                        resultMessage = "● ▲ ■";
                        break;
                }

                var title = "<div class='chracter-title'>" + resultTitle + "</div>"
                var quotes = "<div class='chracter-quotes pt-2'>" + resultQuotes + "</div>"
                var message = "<div class='chracter-msg pt-2 pb-2'>" + resultMessage + "</div>"
                $('.result-message').html(title + quotes + message).show();
                // $('.result-message').html(title + quotes + message);

                // for (let i = 0; i < maxPredictions; i++) {
                //     const classPrediction =
                //         prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                //     labelContainer.childNodes[i].innerHTML = classPrediction;
                // }

            }
        </script>
        <script>
            function Loading() {
                console.log("hho log - Loading")

                var maskHeight = $(document).height();
                var maskWidth = window.document.body.clientWidth;

                var mask = "<div id='mask' style='position:absolute; z-index:9000; background-color:#000000; display:none; left:0; top:0;'></div>";
                var loadingImg = '';

                $('body')
                    .append(mask)

                $('#mask').css({
                    'width': maskWidth,
                    'height': maskHeight,
                    'opacity': '0.3'
                });

                $('#mask').show();
                // $('#loader').show();
            }

            function closeLoading() {
                console.log("hho log - closeLoading ")

                $('#mask, #loader').hide();
                $('#mask, #loader').remove();
            }
        </script>
</body>

<!-- Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 -->

</html>